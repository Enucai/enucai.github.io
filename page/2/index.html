<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width = device-width, initial-scale = 1.0">
  <title>Enucaiの小屋</title>
  <link rel="icon" href="/images/avatar.jpeg">
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdn.bootcdn.net/ajax/libs/fomantic-ui/2.9.3/semantic.min.css">
  <script src="https://cdn.bootcdn.net/ajax/libs/fomantic-ui/2.9.3/semantic.min.js"></script>
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/prism-themes/1.9.0/prism-vsc-dark-plus.min.css">
  <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/KaTeX/0.16.8/katex.min.css">
  <script src="https://cdn.bootcdn.net/ajax/libs/jquery.pjax/2.0.1/jquery.pjax.min.js"></script>
  <script src="/js/main.js"></script>
<meta name="generator" content="Hexo 6.3.0"></head>

<body style="background-image: url('https://z1.ax1x.com/2023/09/21/pPIYnw8.jpg'); background-size: cover; background-repeat: no-repeat; background-attachment: fixed;">
  <div class="ui-col">
    <div id="sidebar">
      <div style="top: 92px; left: 23px; position: fixed;">
        <image id="sa" src="https://z1.ax1x.com/2023/09/22/pPoVbEq.jpg">
      </div>
      <div style="top: 110px; left: 140px; position: fixed; font-size: 25px; z-index: -5;">
        Enucai
      </div>
      <div style="top: 150px; left: 140px; position: fixed; font-size: 15px; z-index: -5;">
        Hangzhou,<br>China
      </div>
      <div style="top: 220px; left: 23px; position: fixed; font-size: 15px; z-index: -5; width: 224px;">
        <p style="text-align: center;">进屋坐坐咩，进来的就别走诺！</p>
        <p style="text-align: center;">QQ: 3425993912<br>添加时请标明来源</p>
      </div>
      <div style="bottom: 20px; left: 23px; position: fixed; font-size: 15px; z-index: -5; width: 224px;">
        <p style="text-align: center;">- Powered by Facter -</p>
      </div>
      <div style="top: 330px; left: 23px; position: fixed; font-size: 15px; z-index: -5; width: 224px;">
        <div>
          我是 Enucai，一名来自浙江省，杭州市的高一菜鸡 OIer。<br><br>
          恭喜发现左边栏！欢迎来玩喵！<br><br>
          本博客的文章主要分为以下几个部分：<br>
          1. 逆天记录：主要记录了本人在日常做题过程中做到的一些比较有意思的题目，每篇 15 题。</br>
          2. 水题乱做：每个月将开设一篇该类型博客，将记录该月中的做题情况以及简要做法。</br>
          3. 游记：在一些比赛后将写一篇游记来记录参赛的经历，当然有时候可能会咕咕咕，就不写了。</br>
          4. 笔记：记录一些比较有用的或者新奇的算法，也可能对于一些算法进行总结归纳。</br>
          5. 鲜花：随便写的一些杂文鲜花，一部分鲜花可能涉及隐私问题或者不适合公开而设置密码，需要者可以联系博主。</br>
          6. 模拟赛日记：记录了模拟赛的过程与一些有趣的模拟赛题，密码为杭二信奥群群号，其他联考连通块内的可以私信询问博主。
        </div>
      </div>
    </div>
    <!-- <img id="avatar" src="/images/avatar.jpeg"> -->
    <div id="dark-mode" onclick="dark_mode()"><p style="font-size: 30px;">💡</p></div>
    <a target="_blank" rel="noopener" href="https://game.maj-soul.com"><img class="orz" style="bottom: 100px;" src="/images/maj.webp"></a>
    <a target="_blank" rel="noopener" href="https://tetr.io"><img class="orz" style="bottom: 168px; width: 40px; height: 40px; right: 35px;" src="/images/tetr.ico"></a>
    <div class="ui-header ui-shadow" style="transition: all 0.3s ease; padding: 20px; background: var(--header-bgcol); z-index: 10; height: 60px; width: 100%;">
      <div class="ui-row ui-space-between">
  <div>
    <a href="/" style="color: var(--header-col);">Enucaiの小屋</a>
  </div>
  <div class="ui-row">
    
    <div class="ui-row-space"></div>
    
      <div class="ui dropdown scrolling">
        <div style="color: var(--title-col);">Friends<i class="dropdown icon"></i></div>
        <div class="menu" style="width: max-content;">
          
            <a class="item" target="_blank" rel="noopener" href="https://cnblogs.com/ShaoJia/" style="min-width: max-content; text-align: right; display: flex;">
              
                <img class="image" src="https://cdn.luogu.com.cn/upload/usericon/101868.png">
              
              <div style="flex: 1;"></div>
              ShaoJia
            </a>
          
            <a class="item" target="_blank" rel="noopener" href="https://ftt2333.github.io/" style="min-width: max-content; text-align: right; display: flex;">
              
                <img class="image" src="https://cdn.luogu.com.cn/upload/usericon/34225.png">
              
              <div style="flex: 1;"></div>
              ftt2333
            </a>
          
            <a class="item" target="_blank" rel="noopener" href="https://cmk666.github.io/" style="min-width: max-content; text-align: right; display: flex;">
              
                <img class="image" src="https://cdn.luogu.com.cn/upload/usericon/127949.png">
              
              <div style="flex: 1;"></div>
              cmk666
            </a>
          
            <a class="item" target="_blank" rel="noopener" href="https://cyb1010.github.io/" style="min-width: max-content; text-align: right; display: flex;">
              
                <img class="image" src="https://cdn.luogu.com.cn/upload/usericon/333119.png">
              
              <div style="flex: 1;"></div>
              cyb1010
            </a>
          
            <a class="item" target="_blank" rel="noopener" href="https://red-black-tree.github.io/" style="min-width: max-content; text-align: right; display: flex;">
              
                <img class="image" src="https://cdn.luogu.com.cn/upload/usericon/173951.png">
              
              <div style="flex: 1;"></div>
              rb_tree
            </a>
          
        </div>
      </div>
    
    <div class="ui-row-space"></div>
    
      <div class="ui dropdown scrolling">
        <div style="color: var(--title-col);">Profiles<i class="dropdown icon"></i></div>
        <div class="menu" style="width: max-content;">
          
            <a class="item" target="_blank" rel="noopener" href="https://codeforces.com/profile/wsyear" style="min-width: max-content; text-align: right; display: flex;">
              
                <img class="image" src="https://codeforces.org/s/61784/favicon-96x96.png">
              
              <div style="flex: 1;"></div>
              wsyear
            </a>
          
            <a class="item" target="_blank" rel="noopener" href="https://codeforces.com/profile/Enucai" style="min-width: max-content; text-align: right; display: flex;">
              
                <img class="image" src="https://codeforces.org/s/61784/favicon-96x96.png">
              
              <div style="flex: 1;"></div>
              Enucai
            </a>
          
            <a class="item" target="_blank" rel="noopener" href="https://atcoder.jp/users/Enucai" style="min-width: max-content; text-align: right; display: flex;">
              
                <img class="image" src="https://img.atcoder.jp/assets/favicon.png">
              
              <div style="flex: 1;"></div>
              Enucai
            </a>
          
            <a class="item" target="_blank" rel="noopener" href="https://www.luogu.com.cn/user/169574" style="min-width: max-content; text-align: right; display: flex;">
              
                <img class="image" src="https://www.luogu.com.cn/favicon.ico">
              
              <div style="flex: 1;"></div>
              Enucai
            </a>
          
        </div>
      </div>
    
    <div class="ui-row-space"></div>
    
      <a href="/archives/" style="color: var(--header-col); margin: 2px;">
        Archives
      </a>
    
    <div class="ui-row-space"></div>
    
      <a href="/tags/" style="color: var(--header-col); margin: 2px;">
        Tags
      </a>
    
    <div class="ui-row-space"></div>
    
      <a href="/about/" style="color: var(--header-col); margin: 2px;">
        About
      </a>
    
  </div>
</div>
    </div>
    <div class="ui-col-space-big"></div>
    <div class="ui-col" style="height: max-content;">
      <div class="ui-content" id="page-content">
        <head>
</head>
<div class="ui-col">
  <div class="ui-card ui-shadow" style="padding: 20px 80px;">
  <p style=" color: var(--title-col); margin: 10px; font-size: 40px; text-align: center;">Enucaiの小屋</p>
  <p style="text-align: center; margin: 0; padding: 0;" id="yiyan-content"></p>
  <p style="text-align: right; margin: 0; padding: 0;" id="yiyan-from"></p>
</div>
<script>
$(() => {
  fetch('https://v1.hitokoto.cn').then((res) => {
    return res.json()
  }).then((res) => {
    $('#yiyan-content').text(`${res.hitokoto}`)
    let from_who = res.from_who
    let s = ''
    if (from_who) s = `-- ${from_who}`
    $('#yiyan-from').html(s)
  })
})
</script>
  <div class="ui-col-space-big"></div>
  <div class="ui-col">
  
  
  <div class="ui-full-width ui-card ui-shadow">
    <div class="ui-row ui-space-between ui-padding">
      <div>
        <h3>逆天记录 - 1</h3>
        创建于2023-07-11
      </div>
      <div>
        <a href="/2023/07/11/day/day-1/" style="padding: 10px;">
          MORE...
        </a>
      </div>
    </div>
    
    <div class="ui-col-line"></div>
    <div class="ui-padding">
      <h2>CF407E k-d-sequence</h2>
<p>首先特判 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">d=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span> 的情况。否则显然一个合法的区间所有数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext> </mtext><mo lspace="0.22em" rspace="0.22em"><mrow><mi mathvariant="normal">m</mi><mi mathvariant="normal">o</mi><mi mathvariant="normal">d</mi></mrow></mo><mtext> </mtext><mi>d</mi></mrow><annotation encoding="application/x-tex">\bmod d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mspace" style="margin-right:0.05555555555555555em;"></span><span class="mord"><span class="mord"><span class="mord mathrm">m</span><span class="mord mathrm">o</span><span class="mord mathrm">d</span></span></span><span class="mspace" style="margin-right:0.05555555555555555em;"></span><span class="mord mathnormal">d</span></span></span></span> 都相等。</p>
<p>将这样的区间拉出来，一个个考察，显然可以将所有的数都 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>÷</mo><mi>d</mi></mrow><annotation encoding="application/x-tex">\div d</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord">÷</span><span class="mord mathnormal">d</span></span></span></span>，这样就变成了公差 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">=1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> 的等差数列。一个区间 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[l,r]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">]</span></span></span></span> 合法，当且仅当：</p>
<ul>
<li>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[l,r]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">]</span></span></span></span> 中的数两两不同。</p>
</li>
<li>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>−</mo><mi>l</mi><mo>+</mo><mn>1</mn><mo>+</mo><mi>k</mi><mo>≥</mo><mi>max</mi><mo>⁡</mo><msub><mi>a</mi><mi>i</mi></msub><mo>−</mo><mi>min</mi><mo>⁡</mo><msub><mi>a</mi><mi>i</mi></msub><mo stretchy="false">(</mo><mi>l</mi><mo>≤</mo><mi>i</mi><mo>≤</mo><mi>r</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r - l + 1 + k\ge \max{a_i} - \min{a_i} (l\le i\le r)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83041em;vertical-align:-0.13597em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mop">max</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mop">min</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.79549em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">i</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mclose">)</span></span></span></span>。</p>
</li>
</ul>
<p>第一个容易处理，直接开一个 map 记录一下每个数最后出现的位置即可。</p>
<p>对于第二个限制，化简变为 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>+</mo><mi>k</mi><mo>≥</mo><mi>max</mi><mo>⁡</mo><msub><mi>a</mi><mi>i</mi></msub><mo>−</mo><mi>min</mi><mo>⁡</mo><msub><mi>a</mi><mi>i</mi></msub><mo>+</mo><mi>l</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">r + k\ge \max{a_i} - \min{a_i} + l - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.83041em;vertical-align:-0.13597em;"></span><span class="mord mathnormal" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mop">max</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.81786em;vertical-align:-0.15em;"></span><span class="mop">min</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，开一个线段树维护右边这依托即可，修改 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>min</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\min</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66786em;vertical-align:0em;"></span><span class="mop">min</span></span></span></span> 与 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>max</mi><mo>⁡</mo></mrow><annotation encoding="application/x-tex">\max</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mop">max</span></span></span></span> 可以开两个单调栈，这是套路的。</p>
<p>所以每次要查询区间内第一个值 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>≤</mo><mi>v</mi><mi>a</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">\le val</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">v</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span></span></span></span> 的位置，采用线段树二分即可。复杂度 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>。</p>
<h2>CF587F Duff is Mad</h2>
<p>暴力做法是建出 ACAM，每次询问时对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mrow><mo stretchy="false">[</mo><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo stretchy="false">]</mo></mrow></msub></mrow><annotation encoding="application/x-tex">s_{[l,r]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7857599999999999em;vertical-align:-0.3551999999999999em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">[</span><span class="mord mathnormal mtight" style="margin-right:0.01968em;">l</span><span class="mpunct mtight">,</span><span class="mord mathnormal mtight" style="margin-right:0.02778em;">r</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span></span></span></span>，每个字符串在 ACAM 上的 endpos 的 fail 树的子树内点权全部 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">+</span><span class="mord">1</span></span></span></span>，然后查询 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>s</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">s_k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 在 ACAM 上的所有节点点权之和。</p>
<p>考虑对于 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∣</mi><msub><mi>s</mi><mi>k</mi></msub><mi mathvariant="normal">∣</mi></mrow><annotation encoding="application/x-tex">|s_k|</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">∣</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord">∣</span></span></span></span> 根号分治。</p>
    </div>
    
  </div>
  
  <div class="ui-col-space-big"></div>
  
  
  <div class="ui-full-width ui-card ui-shadow">
    <div class="ui-row ui-space-between ui-padding">
      <div>
        <h3>PKUSC 2023</h3>
        创建于2023-05-07
      </div>
      <div>
        <a href="/2023/05/07/travels/pkusc2023/" style="padding: 10px;">
          MORE...
        </a>
      </div>
    </div>
    
    <div class="ui-col-line"></div>
    <div class="ui-padding">
      <h2>Day 0</h2>
<p>早起赶到火车站，做了 4.5h 的复兴号从杭州东到北京南，然后做了 1h 地铁才到酒店，去对面吃了肉夹馍，某些人 9 元买了 7 元优惠券 /cf。</p>
<p>下午和晚上在酒店魔域，好像他们夜骑去面基了。。</p>
<p>10 点半还打了个 div2，花了 20min 写了个 E，抢了一血，很爽。口胡了个 F 就睡了（但好像假了？。</p>
<h2>Day 1</h2>
<p>早上 5 点半就醒了，去对面吃了馄饨和豆腐脑（第一次吃豆腐脑 /tuu）。骑车去北大报道，然后开幕式，很高效，一下就好了。</p>
<p>然后去试机，电脑感觉还行，虽然是 win，但是挺好用的。写了个试机题就润了（如果早知道试机代码不会被删。</p>
<p>下午正式比赛，先开 T1，感觉不难，稍微想了一下就会了，写了 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>log</mi><mo>⁡</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\log n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> 的倍增哈希被卡成了 91，改成二分就过了，大概 1h。</p>
<p>开 T2，不太会，写了状压 23pts。然后开 T3，也不会，写了暴力 dp 32pts。</p>
<p>开始疯狂思考，浪费了 1h+，直到最后 40min 才发现 T3 有 ddp 的部分分，赶紧开冲。</p>
    </div>
    
  </div>
  
  <div class="ui-col-space-big"></div>
  
  
  <div class="ui-full-width ui-card ui-shadow">
    <div class="ui-row ui-space-between ui-padding">
      <div>
        <h3>联合省选 2023</h3>
        创建于2023-04-01
      </div>
      <div>
        <a href="/2023/04/01/travels/pe2023/" style="padding: 10px;">
          MORE...
        </a>
      </div>
    </div>
    
    <div class="ui-col-line"></div>
    <div class="ui-padding">
      <h2>Day -1</h2>
<p>学校请假，上午去机房 goose goose duck，好爽。</p>
<p>下午去试机，车费好贵 /fn/fn/fn。</p>
<p>键盘手感好评，居然和我用的完全一样。</p>
<p>晚上不知道在干啥。</p>
<h2>Day 1</h2>
<p>早起，有点没睡醒。</p>
<p>车上背了一下 pb_ds 的单词，相信是用不上的。</p>
<p>开考 20 min 先把 T1 写了，然后开始坐牢。</p>
<p>T2 是数数，感觉不太会，于是先开 T3，发现 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>q</mi><msup><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msup><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nq\log^2 n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.148448em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mord mathnormal" style="margin-right:0.03588em;">q</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8984479999999999em;"><span style="top:-3.1473400000000002em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> 有点傻逼，写了一下。</p>
    </div>
    
  </div>
  
  <div class="ui-col-space-big"></div>
  
  
  <div class="ui-full-width ui-card ui-shadow">
    <div class="ui-row ui-space-between ui-padding">
      <div>
        <h3>百度之星决赛 2022</h3>
        创建于2022-11-26
      </div>
      <div>
        <a href="/2022/11/26/travels/astar2022/" style="padding: 10px;">
          MORE...
        </a>
      </div>
    </div>
    
    <div class="ui-col-line"></div>
    <div class="ui-padding">
      <h2>Day 0</h2>
<p>上午学长们在 NOIp，初中生没得去，在家颓废。</p>
<p>下午去现场看了一下，感觉还不错，被采访了，一时半会儿没答上话来。</p>
<p>希望明天不要太寄，睡觉！</p>
<h2>Day 1</h2>
<p>上午最早到，有点尴尬，不过还好过一会儿孙老师就来了，8 点比赛就开始了。</p>
<p>今年题目比去年人性很多，大概是给你各种类型的信息，让你 encode 和 decode，encode 后的数列长度越小分越高，你还可以写一个词典。</p>
<p>第一题非常困难，要输入各种语言的字符，不太会，于是先鸽了。</p>
<p>然后发现图片信息的题目很好做，随手写了一个就交了，但是一直格式错误，人快崩溃。还好最后瞎改改过了，打开 80pts。</p>
<p>然后去做其他题，主要是要找出 出现次数*长度 最大的几个子串，感觉很 hard。</p>
    </div>
    
  </div>
  
  <div class="ui-col-space-big"></div>
  
  
  <div class="ui-full-width ui-card ui-shadow">
    <div class="ui-row ui-space-between ui-padding">
      <div>
        <h3>CSP 2022</h3>
        创建于2022-09-18
      </div>
      <div>
        <a href="/2022/09/18/travels/csp2022/" style="padding: 10px;">
          MORE...
        </a>
      </div>
    </div>
    
    <div class="ui-col-line"></div>
    <div class="ui-padding">
      <h2>Day -6</h2>
<p>烧烧烧！38.2！！感觉要寄了！！！</p>
<h2>Day -5</h2>
<p>明天是 csp 前最后一场 noip 联考了，希望能好好打。</p>
<p>又是颓废的一天，唯一的成就是 tetr 40lines 突破到 2:05 了。</p>
<p>联考就打了一个题，t2 比较麻烦的初始 dp 想出来了，但是非常 ez 的修改不想写就摆烂，光荣挂成 10pts。</p>
<h2>Day -4</h2>
<p>虽然想好好打模拟赛，但是只想出来一题，赛后发现是 *2800，还是很欣慰的。</p>
<p>明天加了一场 csp 模拟赛，希望别太毒瘤呜呜呜。</p>
<p>又 vp 了两场 cf，AK 了一场，虽然第二场某人说全是诈骗题，但是感觉思维含量还是有的。</p>
    </div>
    
  </div>
  
  <div class="ui-col-space-big"></div>
  
  
  <div class="ui-full-width ui-card ui-shadow">
    <div class="ui-row ui-space-between ui-padding">
      <div>
        <h3>杭电多校 2022</h3>
        创建于2022-07-20
      </div>
      <div>
        <a href="/2022/07/20/travels/hdu2022/" style="padding: 10px;">
          MORE...
        </a>
      </div>
    </div>
    
    <div class="ui-col-line"></div>
    <div class="ui-padding">
      <p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhangshaojia/p/16503449.html">ShaoJia的游记</a></p>
<p><s>其实没有游，都在ez机房。</s></p>
<p>人生第二次打 ACM（第一次算是 THUPC 吧）。</p>
<h2>Day1</h2>
<p>中午去面馆吃面，会到二中已经 11:55 ，跑去机房就开始了。</p>
<p>一下就开了 1011 签到题，结果误以为红色是 WA，想了好久那里挂了，结果 10 分钟后有人告诉我我过了。/qd</p>
<p>全场就做了 1011 和 1012 两道题，成为全队最卷选手。总之把 Shaojia 和 Cxny 带飞了。</p>
<p>中途帮 Shaojia 调了 1007，最后竟然是因为没加 <code>inline</code> 而爆栈了。/qd</p>
<p>最后在死磕 1001，一道 KMP 毒瘤题，WA 了两发无果。</p>
<p>Solved 6 problems，Rank 79。</p>
    </div>
    
  </div>
  
  <div class="ui-col-space-big"></div>
  
  
  
    <div class="ui-row ui-space-around ui-full-width">
  
    <a href="/" class="ui-card ui-shadow ui-center ui-padding-big" style="flex: auto;">
      PREV
    </a>
  
  
  
</div>
  
</div>

</div>
      </div>
      <div class="ui-col-space-mid"></div>
      <div>
        <div class="ui-col">
  <p style="color: var(--footer-col); padding: 20px 30px;">
    Powered by <a target="_blank" rel="noopener" href="https://hexo.io/zh-cn/">Hexo</a>,
    theme by <a target="_blank" rel="noopener" href="https://github.com/ftt2333/hexo-theme-facter">Facter</a>
  </p>
</div>
      </div>
      <div class="ui-col-space-mid"></div>
    </div>
  </div>
  <script>
    $(document).pjax('a[target!=_blank]', '#page-content', {fragment: '#page-content'});
  </script>
</body>

</html>